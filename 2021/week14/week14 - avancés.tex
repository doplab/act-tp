\input{../header.tex}
\usepackage{array}
\newcolumntype{C}[1]{>{\centering\let\newline\\\arraybackslash\hspace{0pt}}m{#1}}

\begin{document}
% Change the following values to true to show \input{../header.tex}

\ShowSolutiontrue
\ShowConseiltrue
\titre
\cours{Classes et types abstraits en Java - Exercices avancés}

Les exercices doivent être faits uniquement en \lstinline{Java}.

Le code présenté dans les énoncés se trouve sur Moodle, dans le dossier \lstinline{Ressources}.

\section{Exercises Complémentaires}

\begin{Exercice}[15 minutes]\textbf{Poker Game}

Cet exercice vous demande de construire un jeu de poker en implémentant un programme Java. Celui-ci comprend trois parties importantes: un paquet de cartes (un ``\textbf{deck}''), un joueur, et une carte, et elles devraient être représentées par trois classes respectives.

Suivez les instructions ci-dessous pour écrire le programme.

\textbf{La classe \lstinline{Carte}}
\begin{itemize}
    \item Attributs: \lstinline{valeur (int), couleur (int)}. Attention, la couleur d'une carte est représentée ici par une valeur de 0 à 3 au lieu d'une chaîne de caractères.
    \item Implémentez un constructeur qui prend en argument une valeur et une couleur.
    \item Implémentez un getter \lstinline{getInfo()} qui affiche dans la console la valeur et la couleur de la carte, vous pouvez vous aider de fonctions privées
    \lstinline{getCouleur()} et \lstinline{getValeur()} pour afficher les cas particuliers.
\end{itemize}

\lstinputlisting[language=java]{ressources/PokerCarte.java}


\textbf{La classe \lstinline{Joueur}}
\begin{itemize}
    \item Attributs: \lstinline{mainDeCartes (Carte[])} (un tableau de carte de taille maximal 2), \lstinline{balance (int)} (le solde total du joueur), \lstinline{mise (int)} (la mise du joueur), \lstinline{monTour (boolean)} (valant true si c’est au tour du joueur).
    \item Implémentez le constructeur qui prend en argument \textbf{deux cartes} (puis les ajoute à sa main), une balance initiale, une mise initiale de 0. Vous pouvez initialiser \lstinline{monTour} comme \lstinline{false} au début.
    \item Implémentez une fonction \lstinline{miser()} qui propose une mise sur la table mais ne retourne rien (utiliser le mot \lstinline{void}). Définir la nouvelle mise du joueur.
    \item Implémentez la méthode \lstinline{montrerMain()} qui montre les cartes sur la table.
    \item Implémentez une méthode \lstinline{gagner()} qui prend en argument la somme des gains sur la table que le joueur vient de gagner, ajoutez là à son solde.
    \item \textbf{Attention:} \lstinline{miser()} et \lstinline{gagner()} s'appliquent seulement si c’est au tour du joueur.
\end{itemize}
\lstinputlisting[language=java]{ressources/PokerJoueur.java}

\textbf{La classe \lstinline{Paquet}}:
\begin{itemize}
    \item Attributs: \lstinline{paquet (ArrayList<Carte>)} (un jeu de cartes complet), \lstinline{NBR_CARTES (int)} (un attribut final et static (constante) ayant pour valeur \lstinline{52}), \lstinline{NBR_MELANGEs (int)} (une constante qui correspond au nombre de mélanges effectués de valeur \lstinline{100}).
    \item Dans le constructeur ne prenant aucun argument, générer le deck en créant au fur et à mesure des cartes. 
    \item Implémenter une fonction public \lstinline{melanger()} qui mélange le jeu de carte et appeler là dans le constructeur après avoir construit le jeu de carte.
    \item Implémenter une fonction getter \lstinline{getCarte()} qui retourne la carte placée en haut de la pile et la retire du jeu.
\end{itemize}
\begin{conseil}
Utilisez \lstinline{Random r = new Random();} sa fonction \lstinline{nextInt()} et utilisez des index et une variable \lstinline{Carte} temporaire pour pouvoir échanger les positions des cartes.
\end{conseil}

\lstinputlisting[language=java]{ressources/PokerPaquet.java}


\begin{solution}
\lstinputlisting[language=java]{solutions/PokerCarte.java}
\end{solution}
\begin{solution}
\lstinputlisting[language=java]{solutions/PokerJoueur.java}
\end{solution}
\begin{solution}
\lstinputlisting[language=java]{solutions/PokerPaquet.java}
\end{solution}
\end{Exercice}

\begin{Exercice}[15 minutes]\textbf{Un jeu de rôle avec des personnages}\optionnel

Dans cet exercice, vous allez mettre en place un simple jeu de rôle. Le concept d’héritage sera très utile dans notre jeu de rôle étant donné que les différentes classes de personnages possèdent certains attributs ou actions similaires. Les personnages de notre jeu sont le Guerrier, le Paladin, le Magicien et le Chasseur. 

Ainsi, il semble intéressant de construire une première classe \lstinline{Personnage}. Un personnage est un objet qui possède plusieurs arguments :
\begin{itemize}
    \item \lstinline{nom (String)} : le nom du personnage
    \item \lstinline{niveau (int)} : le niveau du personnage
    \item \lstinline{pv (int)} : les points de vie du personnage
    \item \lstinline{vitalite (int)} : la vitalité (ou santé) du personnage
    \item \lstinline{force (int)} : la force du personnage
    \item \lstinline{dexterite (int)} : la dextérité du personnage
    \item \lstinline{endurance (int)} : l’endurance du personnage
    \item \lstinline{intelligence (int)} : l’intelligence du personnage\\\\\\
\end{itemize}

Suivez les instructions ci-dessous pour compléter le programme.

\begin{itemize}
    \item Implémentez le constructeur de la classe \lstinline{Personnage} qui prend tous les attributs cités ci-dessus en argument. 
    \item Il peut être intéressant d’afficher les caractéristiques de votre personnage. Après avoir implémenté les getters utiles, implémentez une méthode \lstinline{getInfo()} dans la classe \lstinline{Character} qui affiche des informations du personnage dans la console.
    \item Chaque personnage de ce jeu a un compteur de leur vie restante. Celui-ci va être manipulé par un \lstinline{setter}. Définissez le \lstinline{setter} dans la classe \lstinline{Personnage}.
    \item Implémentez les classes \lstinline{Guerrier, Paladin, Magicien et Chasseur} qui héritent de \lstinline{Personnage} en écrivant tout d’abord leur constructeur respectif. 
    
    \lstinputlisting[language=java]{ressources/RolePlayMere.java}

    \item Pour chacun des personnages, implémentez une méthode \lstinline{attaqueBasique()} qui prend un autre personnage en argument et ne retourne rien. Celle-ci crée une attaque de votre choix en fonction des caractéristiques des personnages (ex : l’attaque du guerrier dépendra de sa force, l’attaque du chasseur de son endurance etc..), et détermine les points de vie restants en soustrayant la gravité de l'attaque à la vitalité du personnage. Affichez le nom de celui que vous avez attaqué et ses points de vie restants.
    \item Les méthodes communes à toutes les sous-classes, doivent être déclarées abstraites dans la classe parente \lstinline{Personnage}. Changer cette classe pour qu'elle soit maintenant abstraite avec la/les méthode(s) abstraite(s) correspondante(s).
    \item \textbf{Attention :} Utiliser un setteur pour réduire les \lstinline{pv} de l’autre personnage.
    
    \lstinputlisting[language=java]{ressources/RolePlayFilles.java}
\end{itemize}

\begin{solution}
    \lstinputlisting[language=java,lastline=70]{solutions/RolePlayMere.java}
\end{solution}
\begin{solution}
    \lstinputlisting[language=java,firstline=71, firstnumber=71]{solutions/RolePlayMere.java}
\end{solution}

\begin{solution}
    \lstinputlisting[language=java,lastline=67]{solutions/RolePlayFilles.java}
\end{solution}
\begin{solution}
    \lstinputlisting[language=java,firstline=68, firstnumber=68]{solutions/RolePlayFilles.java}
\end{solution}
\end{Exercice}

\end{document}

\input{../header.tex}
\usepackage{array}
\newcolumntype{C}[1]{>{\centering\let\newline\\\arraybackslash\hspace{0pt}}m{#1}}

\begin{document}
% Change the following values to true to show \input{../header.tex}

\ShowSolutiontrue
\ShowConseiltrue
\titre
\cours{Abstract Classes and Interfaces in Java}


\section{Abstract Classes}

\begin{Exercice}[10 minutes]\\

Une classe abstraite est une classe dont l'implémentation n'est pas complète. Elle est déclarée en utilisant le mot-clé abstract. Elle peut inclure des méthodes abstraites ou non. Les classes abstraites ne peuvent pas être instanciées, mais servent de base à des sous-classes qui en sont dérivées.
Lorsqu'une sous-classe est dérivée d'une classe abstraite, elle complète généralement l'implémentation de toutes les méthodes abstraites de la classe mère. Si ce n'est pas le cas, la sous-classe doit également être déclarée comme abstraite.

\lstinputlisting{ressources/exo1.java} 


Implémentez une classe abstraite appelée \lstinline{Item}.\\

1. Elle doit avoir 4 variables d'instance et une variable de classe, qui sont les suivantes:

\lstinline{private int id};\\
\lstinline{private static int count = 0};\\
\lstinline{private String name};\\
\lstinline{private double price};\\
\lstinline{private ArrayList<String> ingredients};


2. Elle doit avoir un constructeur prenant les variables name,price et ingredients comme paramètres. Pour définir id, utilisez la ligne suivante:  this.id = ++count;\\

3. Implémentez des méthodes d'accesseurs pour les variables id, name, price et ingredient.\\

4. Implémentez les méthodes \lstinline{equals}(Object o) et \lstinline{toString}().

\begin{conseil}
Pour implémenter la méthode equals vous pouvez comparer les \lstinline{ID} afin de voir si les items correspondent.
\end{conseil}

% TODO: Maeva: où est le fichier ?
%     \begin{solution}
%  
%     \lstinputlisting{solutions/solution1.java} 
%     
%     \end{solution}
\end{Exercice}


\begin{Exercice}[10 minutes]\\
1. Implémentez une classe abstraite \lstinline{Figure} contenant deux attributs protégés : \lstinline{largeur} et \lstinline{longueur} et deux méthodes abstraites : \lstinline{getaire}()et \lstinline{getperimetre}()\\
2. Etendez la classe Figure avec une classe \lstinline{Carre}. Définir les classes getaire() et getpermietre() dans cette classe\\
3. Faire de même pour une classe \lstinline{Rectangle}\\

\begin{conseil}
    Pour rendre une méthode abstraite utiliser "Abstract" comme pour les classes.\\
    Un attribut protégé est accessible partout dans la classe mère et dans les classes étendant la classe mère. On utilise le mot clé \lstinline{protected} pour rendre les attributs protégés. \\
    Pour étendre une classe utilisez : public class Carre extends Figure. 
\end{conseil}


\begin{solution}
\lstinputlisting{solutions/Figure.java} 
\end{solution}
\end{Exercice}

\section{Interface }
\begin{Exercice}[10 minutes]\\
Une déclaration d'interface comprend les modificateurs (public,etc) et le mot clé interface : 

\lstinputlisting{ressources/interface_exemple1.java} 

Les méthodes déclarées dans une interface doivent être implémentées dans des sous-classes :

\lstinputlisting{ressources/interface_exemple2.java} 

1. Implémentez une interface \lstinline{Edible} contenant une méthode eatMe qui ne retourne aucune valeur.\\
2. implémentez une interface \lstinline{Drinkable} contenant une méthode drinkMe qui ne retourne aucune valeur.\\
3. Implémentez une classe Food qui étend la classe Item et qui implémente Edible. Implémentez le constructeur de Food et la méthode eatMe (dans la classe Food).

\begin{conseil}
Vous pouvez reprendre la classe Item du premier exercice.\\
Pour implémenter la méthode eatMe() vous pouvez simplement mettre un \lstinline{println}.
\end{conseil}

Certains aliments ne sont pas seulement Edible mais aussi Drinkable comme les soupes par exemple.\\

4. Implémentez une classe Soup qui extends Food et implémente Drinkable. Ensuite, implémentez à la fois un constructeur pour Soup ainsi que la méthode drinkMe (dans la classe Soup).\\

Vous pouez ensuite créer des instances Soup et Food à l'aide des lignes suivantes pour tester les méthodes eatMe et drinkMe.

\lstinputlisting{ressources/fin_interface.java} 

\begin{solution}
\lstinputlisting{solutions/interface.java} 
\end{solution}
\end{Exercice}


\section{Exercises Complémentaires}
\begin{Exercice}[15 minutes]\textbf{Poker Game}

Cet exercice vous demande de construire un jeu de poker en implémentant un programme Java. Celui-ci comprend trois parties importantes: un paquet de cartes (un « deck »), un joueur, et une carte, et elles devraient être représentées par trois classes respectives.

Suivez les instructions ci-dessous pour écrire le programme.

\textbf{La class \lstinline{Carte}}
\begin{itemize}
    \item Attributs: \lstinline{valeur (int), couleur (int)}. Attention, la couleur d'une carte est représentée ici par une valeur de 0 à 3 au lieu d'une string.
    \item Implémentez un constructeur qui prend en argument une valeur et une couleur.
    \item Implémenter une méthode getter \lstinline{getInfo()} qui affiche dans la console la valeur et la couleur de la carte, vous pouvez vous aider d'une fonction privée \lstinline{getCouleur()} et \lstinline{getValeur()} pour afficher les cas particuliers.
\end{itemize}

\lstinputlisting[language=java]{ressources/PokerCarte.java}


\textbf{La class \lstinline{Joueur}}
\begin{itemize}
    \item Attributs: \lstinline{mainDeCartes (Card[])} (un tableau de carte de taille maximal 2), \lstinline{balance (int)} (la balance total du joureur), \lstinline{mise (int)} (la mise du joueur), \lstinline{monTour (boolean)} (valant true si c’est au tour du joueur).
    \item Implémentez le constructeur qui prend en argument \textbf{deux cartes} (puis les ajoute à sa main), une balance initiale, une mise initiale de 0. Vous pouvez initialiser \lstinline{monTour} comme \lstinline{false} au début.
    \item Implémentez une fonction \lstinline{miser()} qui propose une mise sur la table mais ne retourne rien (utiliser le mot void). Définir la nouvelle mise du joueur.
    \item Implémentez la méthode \lstinline{montrerMain()} qui montre les cartes sur la table.
    \item Implémentez une methode \lstinline{gagner()} qui prend en argument la somme des gains sur la table que le joueur vient de gagner, ajouter là à sa balance.
    \item \textbf{Attention:} \lstinline{miser()} et \lstinline{gagner()} s'appliquent seulement si c’est au tour du joueur.
\end{itemize}
\lstinputlisting[language=java]{ressources/PokerJoueur.java}

\textbf{La classe \lstinline{Paquet}}:
\begin{itemize}
    \item Attributs: \lstinline{paquet (ArrayList<Carte>)} (un jeu de cartes complet), \lstinline{NBR_CARTES (int)} (un attribut final et static (constante) égale à 52), \lstinline{NBR_MELANGEs (int)} (une constant qui correspond au nombre de mélange effectué de valeur 100).
    \item Dans le constructeur ne prenant aucun argument, générer le deck en créant au fur et à mesure des cartes. 
    \item Implémenter une fonction public \lstinline{melanger()} qui mélange le jeu de carte et appeler là dans le constructeur après avoir construit le jeu de carte.
    \item Implémenter une fonction getter \lstinline{getCarte()} qui retourn la carte en haut de la pil et la retire du jeu.
\end{itemize}
\begin{conseil}
Utilisez Random r = new Random(); sa fonction \lstinline{nextInt()} et utiliser des index et une variable \lstinline{Carte} temporaire pour pouvoir échanger les cartes de position.
\end{conseil}

\lstinputlisting[language=java]{ressources/PokerPaquet.java}


\begin{solution}
\lstinputlisting[language=java]{solutions/PokerCarte.java}
\end{solution}
\begin{solution}
\lstinputlisting[language=java]{solutions/PokerJoueur.java}
\end{solution}
\begin{solution}
\lstinputlisting[language=java]{solutions/PokerPaquet.java}
\end{solution}
\end{Exercice}

\begin{Exercice}[15 minutes]\textbf{Un jeu de rôle avec des personnages}

Vous allez implémenter un programme simple du jeu de rôle. Vous avez appris le concepte d’héritage, dans notre jeu de rôle celui-ci s’avère très utile car les différentes classes de personnages posssèdent certains attributs ou actions similaires. Il y a dans notre jeu le Guerrier, le Paladin, le Magicien et le Chasseur. 

Ainsi il semble intéressant de construire une première classe \lstinline{Personnage}. Un personnage est un objet qui possède plusieurs arguments :
\begin{itemize}
    \item \lstinline{nom (String)} : le nom du personnage
    \item \lstinline{niveau (int)} : le niveau du personnage
    \item \lstinline{pv (int)} : les points de vie du personnage
    \item \lstinline{vitalite (int)} : la vitaité du personnage
    \item \lstinline{force (int)} : la force du personnage
    \item \lstinline{dexterite (int)} : la dextérité du personnage
    \item \lstinline{endurance (int)} : l’endurance du personnage
    \item \lstinline{intelligence (int)} : l’intelligence du personnage

\end{itemize}

Comme avant, suivez les intructions ci-dessous pour compléter le programme.

\begin{itemize}
    \item Implémentez le constructeur de la classe \lstinline{Personnage} qui prend tout ces attributs en argument. 
    \item Il peut être intéressant d’afficher les caractéristiques de votre personnage. Implémentez une méthode \lstinline{getInfo()} dans la classe \lstinline{Character} qui affiche dans la console, après avoir implémenté également les getters nécessaires.
    \item Chaque personnage dans ce jeu a un compteur pour leur vie restante. Celui-ci va être manipulé par une méthode setter. Ecrivez-la dans la classe \lstinline{Personnage}.
    \item Maintenant implémentez les classes \lstinline{Guerrier, Paladin, Magicien et Chasseur} qui héritent de \lstinline{Personnage} en écrivant tout d’abord leur constructeur respectif. 
    
    \lstinputlisting[language=java]{ressources/RolePlayMere.java}

    \item Pour chacun des personnages, implémentez une méthode \lstinline{attaqueBasique()} qui prend un autre personnage en argument et ne retourne rien. Celle-ci crée une attaque de votre choix en fonction des caractéristiques des personnages (ex : l’attaque du guerrier dépendra de sa force, l’attaque du chasseur de son endurance etc..), et détermine les points de vie restant en soustrayant la gravité de l'attque de la vitalité du personnage. Affichez le nom de celui que vous avez attaqué et ses points de vie restant.
    \item Cette method est commune à toutes les sous-classes, doit être déclarée abstraite dans la classe parente \lstinline{Personnage}. Changer cette classe pour qu'elle soit maintenant abstraite avec une méthode abstraite \lstinline{attaqueBasique()}:
    \item \textbf{Attention :} il faut utiliser le setteur pour réduire les \lstinline{pv} de l’autre personnage.
    
    \lstinputlisting[language=java]{ressources/RolePlayFilles.java}
\end{itemize}

\begin{solution}
    \lstinputlisting[language=java,lastline=70]{solutions/RolePlayMere.java}
\end{solution}
\begin{solution}
    \lstinputlisting[language=java,firstline=71, firstnumber=71]{solutions/RolePlayMere.java}
\end{solution}

\begin{solution}
    \lstinputlisting[language=java,lastline=67]{solutions/RolePlayFilles.java}
\end{solution}
\begin{solution}
    \lstinputlisting[language=java,firstline=68, firstnumber=68]{solutions/RolePlayFilles.java}
\end{solution}
\end{Exercice}

\end{document}